<header class="header animate-slide-down">
  <div class="container">
    <div class="header-content">
      <div class="logo">
        <a href="/" class="logo-link">
          <app-logo class="logo-image"></app-logo>
          <span class="logo-text">Readme AI</span>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <nav class="nav-menu">
        <ul class="nav-list">
          <li class="nav-item"><a href="#features" class="nav-link">Features</a></li>
          <li class="nav-item"><a href="#how-it-works" class="nav-link">How it works</a></li>
        </ul>
      </nav>

      <!-- Mobile Menu Button -->
      <button class="mobile-menu-button" (click)="toggleMobileMenu()" aria-label="Toggle menu">
        <div class="mobile-menu-icon" [class.open]="mobileMenuOpen">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </button>

      <!-- GitHub Stats in Header -->
      <div class="github-stats-header">
        <!-- Stars Dropdown -->
        <div class="stat-dropdown" (mouseenter)="showStarsDropdown = true" (mouseleave)="showStarsDropdown = false">
          <button type="button" class="stat-link" title="Star repositories">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="stat-icon">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
            <span class="stat-count">{{ totalStats.stars }}</span>
          </button>
          <div class="dropdown-menu" [class.show]="showStarsDropdown">
            <div class="dropdown-item" (click)="navigateToRepo('frontend', 'star')">
              <span class="repo-name">{{ repoStats.frontend.name }}</span>
              <span class="repo-stats">‚≠ê {{ repoStats.frontend.stars }}</span>
            </div>
            <div class="dropdown-item" (click)="navigateToRepo('backend', 'star')">
              <span class="repo-name">{{ repoStats.backend.name }}</span>
              <span class="repo-stats">‚≠ê {{ repoStats.backend.stars }}</span>
            </div>
          </div>
        </div>

        <!-- Forks Dropdown -->
        <div class="stat-dropdown" (mouseenter)="showForksDropdown = true" (mouseleave)="showForksDropdown = false">
          <button type="button" class="stat-link" title="Fork repositories">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="stat-icon">
              <path d="M6 3v12"></path><path d="M18 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path><path d="M6 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path><path d="M18 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path><path d="M18 6v13"></path><path d="M6 9a9 9 0 0 0 9 9"></path>
            </svg>
            <span class="stat-count">{{ totalStats.forks }}</span>
          </button>
          <div class="dropdown-menu" [class.show]="showForksDropdown">
            <div class="dropdown-item" (click)="navigateToRepo('frontend', 'fork')">
              <span class="repo-name">{{ repoStats.frontend.name }}</span>
              <span class="repo-stats">üç¥ {{ repoStats.frontend.forks }}</span>
            </div>
            <div class="dropdown-item" (click)="navigateToRepo('backend', 'fork')">
              <span class="repo-name">{{ repoStats.backend.name }}</span>
              <span class="repo-stats">üç¥ {{ repoStats.backend.forks }}</span>
            </div>
          </div>
        </div>

        <!-- Contribute Dropdown -->
        <div class="stat-dropdown" (mouseenter)="showContributeDropdown = true" (mouseleave)="showContributeDropdown = false">
          <button type="button" class="stat-link" title="Contribute to repositories">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="stat-icon">
              <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
            </svg>
          </button>
          <div class="dropdown-menu" [class.show]="showContributeDropdown">
            <div class="dropdown-item" (click)="navigateToRepo('frontend', 'contribute')">
              <span class="repo-name">{{ repoStats.frontend.name }}</span>
            </div>
            <div class="dropdown-item" (click)="navigateToRepo('backend', 'contribute')">
              <span class="repo-name">{{ repoStats.backend.name }}</span>
            </div>
          </div>
        </div>

        <!-- GitHub Sign In / Go to App Button -->
        <button type="button" class="github-signin-link" (click)="handleGitHubLogin()" [title]="isAuthenticated ? 'Go to Dashboard' : 'Sign in with GitHub'">
          <i class="github-icon"></i>
          <span>{{ isAuthenticated ? 'Go to Dashboard' : 'Sign in with GitHub' }}</span>
        </button>
      </div>
    </div>
  </div>
</header>

<!-- Mobile Navigation Menu -->
<nav class="mobile-nav" [class.open]="mobileMenuOpen">
  <ul class="mobile-nav-list">
    <li class="mobile-nav-item">
      <a href="#features" class="mobile-nav-link" (click)="closeMobileMenu()">Features</a>
    </li>
    <li class="mobile-nav-item">
      <a href="#how-it-works" class="mobile-nav-link" (click)="closeMobileMenu()">How it works</a>
    </li>
    <li class="mobile-nav-item mobile-github-stats">
      <div class="mobile-stats-container">
        <button type="button" class="mobile-stat-button" (click)="navigateToRepo('frontend', 'star'); closeMobileMenu()">
          <i class="star-icon"></i>
          <span>Star Frontend ({{ repoStats.frontend.stars }})</span>
        </button>
        <button type="button" class="mobile-stat-button" (click)="navigateToRepo('backend', 'star'); closeMobileMenu()">
          <i class="star-icon"></i>
          <span>Star Backend ({{ repoStats.backend.stars }})</span>
        </button>
        <button type="button" class="mobile-stat-button" (click)="navigateToRepo('frontend', 'fork'); closeMobileMenu()">
          <i class="fork-icon"></i>
          <span>Fork Frontend ({{ repoStats.frontend.forks }})</span>
        </button>
        <button type="button" class="mobile-stat-button" (click)="navigateToRepo('backend', 'fork'); closeMobileMenu()">
          <i class="fork-icon"></i>
          <span>Fork Backend ({{ repoStats.backend.forks }})</span>
        </button>
        <button type="button" class="mobile-stat-button" (click)="navigateToRepo('frontend', 'contribute'); closeMobileMenu()">
          <i class="contribute-icon"></i>
          <span>Contribute to Frontend</span>
        </button>
        <button type="button" class="mobile-stat-button" (click)="navigateToRepo('backend', 'contribute'); closeMobileMenu()">
          <i class="contribute-icon"></i>
          <span>Contribute to Backend</span>
        </button>
      </div>
    </li>
  </ul>
</nav>

<main class="container">
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <h1 class="animate-slide-down-delayed">Generate perfect READMEs with AI</h1>
      <p class="subtitle animate-slide-up-delayed">
        Connect your GitHub repositories and create professional READMEs in seconds with our AI-powered generator.
      </p>
      <div class="cta-button animate-slide-up-delayed">
        <button type="button" class="btn btn-primary animate-pulse" (click)="handleGitHubLogin()">
          <i class="github-icon"></i>
          <span>{{ isAuthenticated ? 'Go to Dashboard' : 'Sign in with GitHub' }}</span>
        </button>
      </div>
    </div>
  </section>

  <!-- Product Demo Section -->
  <section class="product-demo animate-fade-in">
    <div class="demo-container">
      <!-- Fallback if image doesn't load -->
      <div *ngIf="!demoImageLoaded" class="demo-image-placeholder">
        <div class="demo-placeholder-text">Product Demo</div>
      </div>
      <img #demoImg src="assets/images/demo.png" alt="ReadmeAI Product Demo" class="demo-image"
           (error)="handleDemoImageError($event)"
           (load)="demoImageLoaded = true"
           [style.display]="demoImageLoaded ? 'block' : 'none'">
      <p class="demo-caption">Product Demo Screenshot</p>
    </div>
  </section>

  <!-- Features Section -->
  <section id="features" class="features">
    <h2 class="section-title animate-slide-up">Features</h2>

    <div class="features-list-container">
      <ul class="features-list">
        @for (feature of features; track feature.title; let i = $index) {
          <li class="feature-item animate-slide-in" [style.animation-delay]="(i * 0.2) + 's'">
            <div class="feature-icon">
              <i [class]="feature.icon + '-icon'"></i>
            </div>
            <div class="feature-content">
              <h3 class="feature-title">{{ feature.title }}</h3>
              <p class="feature-description">{{ feature.description }}</p>
            </div>
          </li>
        }
      </ul>
    </div>
  </section>

  <!-- How It Works Section -->
  <section id="how-it-works" class="how-it-works">
    <h2 class="section-title animate-slide-up">How It Works</h2>
    <div class="steps-container">
      @for (step of steps; track step.number; let i = $index) {
        <div class="step-card animate-fade-in-scale" [style.animation-delay]="(i * 0.2) + 's'">
          <div class="step-icon">
            <i [class]="step.icon + '-icon'"></i>
          </div>
          <h3 class="step-title">{{ step.title }}</h3>
          <p class="step-description">{{ step.description }}</p>
        </div>
      }
    </div>
  </section>

</main>

<!-- Theme Toggle - using the shared component -->
@if (isBrowser) {
  <app-theme-toggle class="fixed animate-fade-in"></app-theme-toggle>
}

<footer class="footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-logo">
        <app-logo class="footer-logo-image"></app-logo>
        <span class="footer-logo-text">Readme AI</span>
      </div>

      <div class="footer-links">
        <div class="footer-links-column">
          <h3 class="footer-heading">Product</h3>
          <ul class="footer-list">
            <li><a href="#features">Features</a></li>
            <li><a href="#how-it-works">How it works</a></li>
          </ul>
        </div>

        <div class="footer-links-column">
          <h3 class="footer-heading">Resources</h3>
          <ul class="footer-list">
            <li><a href="https://ai-readme-generator-be-912048666815.us-central1.run.app/" target="_blank">API</a></li>
          </ul>
        </div>

        <div class="footer-links-column">
          <h3 class="footer-heading">About</h3>
          <ul class="footer-links">
            <li><a href="/about">About me</a></li>
            <li><a href="/privacy-policy">Privacy Policy</a></li>
            <!-- <li><a href="#contact">Contact</a></li> -->
          </ul>
        </div>
      </div>
    </div>

    <div class="social-links-container">
      <div class="social-links">
        <a href="https://x.com/ifihan_" class="social-link" target="_blank"><i class="twitter-icon"></i></a>
        <a href="https://github.com/Ifihan" class="social-link" target="_blank"><i class="github-icon"></i></a>
        <a href="https://linkedin.com/in/ifihan-olusheye" class="social-link" target="_blank"><i class="linkedin-icon"></i></a>
        <a href="https://ifihan.com" class="social-link" target="_blank"><i class="website-icon chain-link-icon"></i></a>
      </div>
    </div>

    <div class="footer-bottom">
      <p class="copyright">¬© {{ currentYear }} Readme AI. All rights reserved.</p>
    </div>
  </div>
</footer>
