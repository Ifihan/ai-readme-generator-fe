import{a as O}from"./chunk-7APNSPFN.js";import{A as F,Ga as G,H as B,Ha as J,I as z,Ia as p,Ja as K,Ka as Q,M as C,Oa as W,P as y,Pa as X,Q as a,Qa as Y,U as M,Ua as Z,Va as tt,X as f,Xa as et,Z as U,ca as i,cb as ot,da as s,e as A,ea as c,g as D,ha as $,i as L,ia as V,j as b,ja as k,k as R,n as d,o as T,p as j,qa as I,ra as q,t as v,w as H,x as r,z as E}from"./chunk-SUWS7CD2.js";var l=class t{constructor(o){this.platformId=o;this.isBrowser=K(this.platformId)}authService=r(O);router=r(tt);isBrowser;canActivate(o,e){return o.queryParamMap.has("token")||!this.isBrowser?!0:this.authService.isAuthenticated().pipe(R(n=>n?!0:this.router.createUrlTree([""])),d(n=>L(this.router.createUrlTree([""]))))}static \u0275fac=function(e){return new(e||t)(H(B))};static \u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})};var nt=[{path:"",loadComponent:()=>import("./chunk-HNGSGT32.js").then(t=>t.LandingComponent)},{path:"dashboard",loadComponent:()=>import("./chunk-UEDS4J7J.js").then(t=>t.DashboardComponent),canActivate:[l]},{path:"auth/callback",loadComponent:()=>import("./chunk-DORD74DI.js").then(t=>t.AuthCallbackComponent)},{path:"generate-readme/:repoUrl",loadComponent:()=>import("./chunk-OWPYNUKO.js").then(t=>t.ReadmeGenerateComponent)},{path:"settings",loadComponent:()=>import("./chunk-AV7DCLCM.js").then(t=>t.SettingsComponent),canActivate:[l]},{path:"**",redirectTo:""}];var m=class t{loadingSubject=new D(!1);requestCount=0;loading$=this.loadingSubject.asObservable();show(){this.requestCount++,this.requestCount===1&&this.loadingSubject.next(!0)}hide(){this.requestCount--,this.requestCount<=0&&(this.requestCount=0,this.loadingSubject.next(!1))}forceHide(){this.requestCount=0,this.loadingSubject.next(!1)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})};var it=(t,o)=>{let e=r(O),n=r(m),g=t.headers.has("skip-loading")||t.url.includes("/logout")||t.url.includes("/ping")||t.url.includes("/health");g||n.show();let u=t,N=typeof localStorage<"u"?localStorage.getItem("access_token"):null;return N&&t.url.includes("/api/")&&(u=t.clone({setHeaders:{Authorization:`Bearer ${N}`}})),o(u).pipe(d(P=>P.status===401&&t.url.includes("/api/")&&!t.url.includes("/auth/refresh-token")&&!t.url.includes("/auth/login")?e.refreshToken().pipe(j(()=>{let h=typeof localStorage<"u"?localStorage.getItem("access_token"):null;if(h){let st=t.clone({setHeaders:{Authorization:`Bearer ${h}`}});return o(st)}return e.logout(),b(()=>P)}),d(h=>(e.logout(),b(()=>h)))):b(()=>P)),T(()=>{g||n.hide()}))};var rt={providers:[et(nt),W(Y(),X([it]))]};function mt(t,o){if(t&1){let e=$();i(0,"div",2)(1,"div",3),c(2,"span",4),i(3,"span",5),I(4),s()(),i(5,"button",6),V("click",function(){let g=E(e).$implicit,u=k();return F(u.dismiss(g.id))}),I(6,"\xD7"),s()()}if(t&2){let e=o.$implicit,n=k();U("success",e.type==="success")("error",e.type==="error")("warning",e.type==="warning")("info",e.type==="info"),C(2),f("innerHTML",n.getIcon(e.type),z),C(2),q(e.message)}}var S=class t{constructor(o){this.notificationsSvc=o;this.sub=this.notificationsSvc.getNotifications().subscribe(e=>this.notifications=e)}notifications=[];sub;dismiss(o){this.notificationsSvc.remove(o)}getIcon(o){switch(o){case"success":return"\u2705";case"error":return"\u26D4\uFE0F";case"warning":return"\u26A0\uFE0F";default:return"\u2139\uFE0F"}}ngOnDestroy(){this.sub?.unsubscribe()}static \u0275fac=function(e){return new(e||t)(y(ot))};static \u0275cmp=a({type:t,selectors:[["app-notification-container"]],decls:2,vars:1,consts:[["aria-live","polite","aria-atomic","true",1,"toast-container"],["class","toast",3,"success","error","warning","info",4,"ngFor","ngForOf"],[1,"toast"],[1,"content"],[1,"icon",3,"innerHTML"],[1,"message"],["aria-label","Dismiss",1,"close",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0),M(1,mt,7,10,"div",1),s()),e&2&&(C(),f("ngForOf",n.notifications))},dependencies:[p,G],styles:["[_nghost-%COMP%]{position:fixed;inset:0;pointer-events:none;z-index:2147483647}.toast-container[_ngcontent-%COMP%]{position:fixed;top:16px;right:16px;display:flex;flex-direction:column;gap:8px;z-index:2147483647}.toast[_ngcontent-%COMP%]{pointer-events:auto;display:flex;align-items:center;gap:12px;padding:12px 14px;border-radius:8px;box-shadow:0 2px 10px #00000026;min-width:280px;max-width:420px;background:var(--toast-bg, #fff);color:var(--toast-fg, #111);border:1px solid rgba(0,0,0,.06)}.toast[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex:1}.toast[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px;display:inline-flex;align-items:center;justify-content:center}.toast[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{line-height:1.3}.toast[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{background:transparent;border:0;font-size:18px;line-height:1;cursor:pointer;color:inherit;opacity:.7}.toast[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{opacity:1}.toast.success[_ngcontent-%COMP%]{--toast-bg: #ecfdf5;--toast-fg: #065f46;border-color:#a7f3d0}.toast.error[_ngcontent-%COMP%]{--toast-bg: #fef2f2;--toast-fg: #7f1d1d;border-color:#fecaca}.toast.warning[_ngcontent-%COMP%]{--toast-bg: #fffbeb;--toast-fg: #78350f;border-color:#fde68a}.toast.info[_ngcontent-%COMP%]{--toast-bg: #eff6ff;--toast-fg: #1e3a8a;border-color:#bfdbfe}@media (prefers-color-scheme: dark){.toast[_ngcontent-%COMP%]{background:#111827;color:#e5e7eb;border-color:#374151}.toast.success[_ngcontent-%COMP%]{--toast-bg: #064e3b;--toast-fg: #ecfdf5}.toast.error[_ngcontent-%COMP%]{--toast-bg: #7f1d1d;--toast-fg: #fee2e2}.toast.warning[_ngcontent-%COMP%]{--toast-bg: #78350f;--toast-fg: #fffbeb}.toast.info[_ngcontent-%COMP%]{--toast-bg: #1e3a8a;--toast-fg: #eff6ff}}"]})};function dt(t,o){t&1&&(i(0,"div",1)(1,"div",2),c(2,"div",3),s()())}var x=class t{constructor(o){this.loadingService=o}isLoading=!1;subscription=new A;ngOnInit(){this.subscription=this.loadingService.loading$.subscribe(o=>{this.isLoading=o})}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(e){return new(e||t)(y(m))};static \u0275cmp=a({type:t,selectors:[["app-loading-bar"]],decls:1,vars:1,consts:[["class","loading-bar-container",4,"ngIf"],[1,"loading-bar-container"],[1,"loading-bar"],[1,"loading-bar-progress"]],template:function(e,n){e&1&&M(0,dt,3,0,"div",0),e&2&&f("ngIf",n.isLoading)},dependencies:[p,J],styles:[".loading-bar-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:9999;height:3px}.loading-bar[_ngcontent-%COMP%]{height:100%;background:#0000001a;overflow:hidden}.loading-bar-progress[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--primary),#4caf50,var(--primary));background-size:200% 100%;animation:_ngcontent-%COMP%_loadingAnimation 2s ease-in-out infinite;width:100%}@keyframes _ngcontent-%COMP%_loadingAnimation{0%{transform:translate(-100%)}50%{transform:translate(0)}to{transform:translate(100%)}}.loading-bar-progress-pulse[_ngcontent-%COMP%]{height:100%;background:var(--primary);animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite;width:100%}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.3}50%{opacity:1}}.loading-bar-progress-gradient[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,transparent,var(--primary),transparent);background-size:50% 100%;animation:_ngcontent-%COMP%_gradientMove 1.5s ease-in-out infinite;width:100%}@keyframes _ngcontent-%COMP%_gradientMove{0%{background-position:-50% 0}to{background-position:150% 0}}"]})};var w=class t{ngOnInit(){if(typeof window<"u"){let o=window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme")||"system";document.documentElement.setAttribute("data-theme",e),e==="system"?document.documentElement.classList.toggle("dark",o):document.documentElement.classList.toggle("dark",e==="dark"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n=>{document.documentElement.getAttribute("data-theme")==="system"&&document.documentElement.classList.toggle("dark",n.matches)})}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=a({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(e,n){e&1&&c(0,"app-loading-bar")(1,"router-outlet")(2,"app-notification-container")},dependencies:[Z,p,S,x],encapsulation:2})};Q(w,rt).catch(t=>console.error(t));
